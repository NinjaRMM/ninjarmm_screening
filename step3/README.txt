This code uses thread lib, to link the lib use:
g++ step3.cpp  -pthread